(function(t){function e(e){for(var n,a,s=e[0],u=e[1],l=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,s=1;s<r.length;s++){var u=r[s];0!==o[u]&&(n=!1)}n&&(i.splice(e--,1),t=a(a.s=r[0]))}return t}var n={},o={app:0},i=[];function a(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=n,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)a.d(r,n,function(e){return t[e]}.bind(null,n));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var c=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";var n=r("85ec"),o=r.n(n);o.a},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("h1",[t._v("html5拖放 + vue + localStorage，实现拖放排序并记录到本地")]),r("ul",{staticClass:"list"},t._l(t.items,(function(e){return r("li",{key:e.id},[r("span",{attrs:{draggable:"true",sort:e.sort}},[t._v(t._s(e.name)+" ")]),r("i",{staticClass:"close",attrs:{itemId:e.id}},[t._v("×")])])})),0)])},i=[],a=(r("4160"),r("a434"),r("159b"),{data:function(){return{items:[]}},mounted:function(){var t=this;this.updateItemsSort(),document.querySelectorAll(".list .close").forEach((function(e){e.addEventListener("click",(function(){for(var r=e.getAttribute("itemId"),n=0;n<t.items.length;n++)if(t.items[n].id==r){t.items.splice(n,1),t.updateSort();break}}))}));var e=document.querySelectorAll(".list span"),r=-1,n=-1;e.forEach((function(o){o.addEventListener("dragstart",(function(t){console.log("item"+t.target.getAttribute("sort")+"_dragstart"),t.dataTransfer.effectAllowed="move",r=parseInt(t.target.getAttribute("sort")),t.target.classList.add("dragFrom")})),o.addEventListener("dragenter",(function(t){console.log("item"+t.target.getAttribute("sort")+"_dragenter");var n=t.target.getAttribute("sort");e.forEach((function(t){t.classList.remove("dragTo")})),r!=n&&t.target.classList.add("dragTo"),t.preventDefault()})),o.addEventListener("dragover",(function(t){console.log("item"+t.target.getAttribute("sort")+"_dragover"),t.preventDefault()})),o.addEventListener("drop",(function(e){if(console.log("item"+e.target.getAttribute("sort")+"_drop"),e.preventDefault(),n=parseInt(e.target.getAttribute("sort")),r!=n){console.log("%citem"+r+"交换item"+n,"color:orange");var o=t.items[r].sort;t.items[r].sort=t.items[n].sort,t.items[n].sort=o,e.target.classList.remove("dragTo"),t.updateItemsSort()}})),o.addEventListener("dragend",(function(t){console.log("item"+t.target.getAttribute("sort")+"_dragend"),t.target.classList.remove("dragFrom"),t.preventDefault()})),o.addEventListener("dragexit",(function(t){console.log("item"+t.target.getAttribute("sort")+"_dragexit"),t.preventDefault()})),o.addEventListener("dragleave",(function(t){console.log("item"+t.target.getAttribute("sort")+"_dragleave"),t.preventDefault()}))}))},updated:function(){this.updateItemsSort()},methods:{updateItemsSort:function(){var t=document.querySelectorAll(".list li"),e=[];this.items.forEach((function(r,n){var o=parseInt(r.sort/3),i=r.sort%3;t[n].setAttribute("style","transform: translate( "+100*i+"%, "+100*o+"%)"),e.push({id:r.id,sort:r.sort})})),window.localStorage&&(window.localStorage["listSort"]=JSON.stringify(e))},updateSort:function(){this.items.sort((function(t,e){return t.sort-e.sort})),this.items.forEach((function(t,e){t.sort=e}))}},created:function(){this.items=[{id:0,name:"item0"},{id:1,name:"item1"},{id:2,name:"item2"},{id:3,name:"item3"},{id:4,name:"item4"},{id:5,name:"item5"},{id:6,name:"item6"},{id:7,name:"item7"},{id:8,name:"item8"}];var t=[];if(window.localStorage){var e=window.localStorage["listSort"];void 0!=e&&(t=JSON.parse(e))}0==t.length?this.items.forEach((function(t,e){t.sort=e})):(this.items.forEach((function(e){for(var r=0;r<t.length;r++){if(e.id==t[r].id){e.sort=t[r].sort;break}r==t.length-1&&(e.sort=t.length)}})),this.updateSort())}}),s=a,u=(r("034f"),r("2877")),l=Object(u["a"])(s,o,i,!1,null,null,null),c=l.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(c)}}).$mount("#app")},"85ec":function(t,e,r){}});
//# sourceMappingURL=app.4f294d5d.js.map